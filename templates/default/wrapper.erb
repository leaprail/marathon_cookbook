#!/bin/bash
# This file is generated by Chef

# environmental variables
<%= @env.map{|k,v| "#{k}=\"#{v}\""}.join("\n") %>

<%- if @syslog -%>
# stdout and stderr to syslog
exec 1> >(exec logger -p user.info -t "marathon")
exec 2> >(exec logger -p user.err  -t "marathon")
<%- end -%>

# marathon bin
exec <%= @marathon_bin %> \
<%- @flags.sort.each do |flag, value| -%>
<%- if value.is_a? String -%>
  <%= "--#{flag}" %><%= " \"#{value}\"" %> \
<%- else -%>
  <%= "--#{value ? '' : 'disable_'}#{flag}" %> \
<%- end -%>
<%- end -%>
